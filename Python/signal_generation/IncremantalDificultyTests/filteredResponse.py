# Seting upp libraries
import os
import sys

SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))
sys.path.append(os.path.dirname(SCRIPT_DIR))

import matplotlib.pyplot as pyplot

# Filtered signal
signal = [
-444, 78, -68, -266, -2738, 662, -676, -480, -430, 174, -10, -22, -122, 218, -344, -64, -132, -198, 0, -124, 1074, -3850, -770, 150, -186, -1282, -142, 448, 42, 554, -610, -362, 382, 200, -322, -134, 280, -270, -162, -18, -308, -2836, -286, -100, 186, 926, -590, -42, 192, 698, -402, 2, -160, 348, -232, 242, -400, 360, -288, 184, -640, 458, 18, 94, -542, 24, 158, 80, 166, 106, 320, -30, 748, 552, 374, 24, 614, -20, 256, -44, 1128, -410, 958, -30, 936, -324, 3202, -180, 23006, -2054, -4588, 598, -1862, 168, -1400, 962, -766, 346, -1090, 574, -1252, 64, -1076, 60, -908, 0, -470, 804, -704, 564, -334, 438, -402, 376, -472, 344, -432, 180, -216, 20, -78, 478, -96, 284, 180, -188, -62, -154, -358, -368, -458, 656, 444, 106, -138, -124, -140, -1320, 52, 560, 416, 36, 26, 182, 178, -266, -248, 274, 54, -192, -460, 262, -676, -270, -334, 26, -802, -1154, 78, 718, 776, 590, 288, -156, 258, -542, 80, 378, -56, -260, 892, 866, 1526, -26, -1080, -12, -694, 296, -154, 374, -900, -830, 334, 526, -586, 626, 150, 490, -184, 252, 486, 126, 228, 316, 636, 378, 2002, 442, -662, -408, 500, 72, -1008, 734, -382, 564, 84, -120, -368, 304, 48, -192, -42, 280, 334, 132, 1488, -368, -954, 338, -1094, 426, 80, -210, -596, 408, -82, -258, -426, -274, -348, 68, 
-192, -40, -78, -48, -554, -182, 394, 276, 302, -58, 368, 888, 484, 472, 186, 332, -64, 676, 340, 244, 508, 246, -108, 194, 502, 570, -446, 206, -56, 116, -16, 1214, 488, 2500, -1038, -1994, -288, -336, -550, -524, 120, -172, -822, -762, 18, -576, -4, -154, -96, -244, -1006, 222, -410, -102, -210, 396, -86, 140, -184, -222, -156, -190, 644, 438, -298, 366, 668, 576, 862, 378, -292, -350, 282, -314, -750, -52, 84, 636, -62, -240, 632, -72, -560, 322, 140, 468, -160, -228, 14, 10, -168, -332, 484, -150, -740, -134, -156, -126, 36, -16, -124, 204, 244, -140, 126, 406, 92, 68, 406, -132, -960, 46, -292, -302, -860, 1082, 298, 142, -318, -672, -594, -162, -396, 234, 138, -436, -324, 502, -440, -312, 52, 172, 146, -132, 114, 806, -194, -6, -224, 872, -126, 514, 330, 110, -146, 152, -932, -518, -130, 146, -60, -408, 132, -416, -78, -98, -250, -90, -218, 846, 254, 480, -666, -662, -146, -500, 444, 342, 22, -324, 24, -74, 124, -322, -182, 172, -12, 254, -266, 70, -118, -138, -246, 1020, -474, 650, -558, 428, 70, 512, 438, -328, -216, 40, -392, -158, -62, 48, -574, -1042, -84, 0, -50, -902, -28, -86, -302, -294, -214, -160, 586, -770, -104, 72, 706, -166, 24, -14, 34, -1116, -214, 86, -536, 584, -94, -306, -538, -520, -268, 110, -282, 192, -58, 178, 730, -408, 36, 96, -564, 1560, -360, -282, -592, 2154, 220, 228, 556, -910, 276, 38, -270, -578, -422, 94, 276, -332, 20, 282, -866, -770, -122, 186, 358, -124, -52, -62, 4, 800, -70, 284, -510, -806, 8, -16, 152, 220, -208, -174, 828, 666, -236, -240, -906, -1232, 216, 90, -538, -1332, 18, -210, -1178, -110, 224, 452, -36, -478, -108, -472, -298, -242, 238, 146, -848, -284, 256, -234, 290, 164, -86, 318, -856, 160, -12, -320, -894, -296, 62, -170, -612, 500, 386, -334, 82, -778, 46, -42, 820, -588, 316, 282, 70, -408, -272, -68, -1096, 28, 112, 194, 304, -424, 330, 322, -88, 532, 180, 54, -206, -364, -50, 154, -1292, 1558, -68, -544, 48, -674, 110, -60, -746, -70, -224, -584, 382, 232, 132, 418, 1096, 426, 84, -698, 580, -1122, 270, -192, 1110, -898, -128, 394, 408, -64, -292, 148, 408, 176, 36, -36, 516, 510, -616, -358, -6, 572, 12, -674, 366, -958, -950, -616, -1644, -500, 612, 70, -92, -226, -354, -96, -296, 264, -138, 136, 632, 730, -914, -368, -2198, -372, 182, -314, -3040, -136, 1804, 292, 1390, -12, 284, -162, 432, -612, 246, -418, 468, -372, 54, -518, 868, -1694, -620, 738, -328, 376, -358, -170, -1746, -98, 844, -270, 966, -420, 398, 386, 208, 260, 472, -244, 264, 232, 1084, -1038, 1862, -2256, -864, 1020, 768, -624, -466, 364, -404, -516, -160, 244, 792, 8, 270, -54, 252, -288, -258, -40, 354, -1346, -150, 1026, -206, 874, -662, -306, -136, -372, 232, -88, 226, -378, -76, 256, -662, -252, 428, 576, 340, -172, 164, 222, 382, 488, -610, 70, 98, -86, -418, -506, -430, -646, -354, 252, -120, 102, -722, 30, -526, -242, -542, -460, -600, -808, -1610, -444, -4992, -1706, 5396, 1394, 1990, 564, 592, 680, 614, -118, 864, 130, -116, 620, 232, 162, 548, 820, 1316, -264, 1182, 122, 86, -102, 608, 292, -582, -460, 200, -216, -154, -340, -2, 316, 288, -390, -46, -10, 862, -1270, -92, -254, 998, -338, 1046, -650, 168, -1336, -42, -1436, -248, 1628, -14, -72, 10, -110, -282, -180, 18, 46, -176, 388, 308, -1404, 0, -1648, 358, 520, -96, -1954, 724, 3954, 854, 1254, 484, 208, 648, 188, 420, 382, 740, 134, 532, 258, 1158, 294, -2464, -1004, -530, -390, 80, -266, -114, -1184, 548, 2460, 34, 1140, -120, 780, 228, 330, 686, 362, 646, 518, 1102, 596, 1818, 656, -2946, -1912, 204, 218, -1096, -628, 138, -254, 312, -40, -76, 638, 336, -428, 382, -94, 178, -764, 1062, -178, -2374, -622, -914, 
-362, 574, -928, 10, -46, 476, -300, 104, -100, 128, -540, 190, -670, 92, 42, 418, -290, 174, -12, 138, -470, 146, -622, 278, -418, 538, -726, 284, -772, 400, -960, 322, -872, 486, -1328, 488, -1002, 510, -1772, 564, -2066, 42, -2714, 656, -6214, -2738, 29946, -434, 3922, -600, 1506, 446, 1194, 286, 754, 92, 258, 170, 654, -164, 804, 264, 828, 352, 328, 356, -84, 200, 72, 378, -356, 336, 136, 108, -162, -82, 4, 544, -8, 370, -30, 846, 130, -118, -476, -126, 138, 528, 210, 440, -706, 72, -540, -2304, -418, 2, -372, -160, -526, -18, 
-556, -442, -508, -234, -374, 466, -590, 194, -382, -1100, 208, 88, -188, -3850, 1086, -280, 288, 242, -538, -184, -400, -642, -530, -124, -236, -766, -468, 40, -702, 186, -3434, 
-444, -220,
]


# Get unfiltered signal
signalNoise = [
]
try:
    with open(f"{SCRIPT_DIR}/Test5.txt", "r+") as file:
        temp = file.readline()[1:-1]
        tempProcessed = temp.split(",")

        for value in tempProcessed:
            signalNoise += [int(value)]
except:
    print("Run Test5 first")


# Plot signal to see
t = list(range(0, len(signal)))
pyplot.plot(t, signal, "b", label="Filtered Signal")
t = list(range(0, len(signalNoise)))
pyplot.plot(t, signalNoise, "c", label="Noisy Signal")
pyplot.title("Before and after filtering")
pyplot.legend()
pyplot.show()
