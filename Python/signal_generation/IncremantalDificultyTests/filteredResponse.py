# Seting upp libraries
import os
import sys

SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))
sys.path.append(os.path.dirname(SCRIPT_DIR))

import matplotlib.pyplot as pyplot

# Filtered signal
signal = [
-112, -190, 168, 78, 114, 20, 148, 48, 134, 76, 126, -6, 84, 32, 196, -14, 154, 56, 158, 104, 156, -38, 168, 42, 194, 12, 154, -92, 112, -42, 108, -62, 70, -122, 146, -112, 68, -36, 20, -72, -68, -90, 50, -50, 84, -66, -62, -150, -36, -102, -18, -96, -2, -104, 38, -100, -102, -180, -68, -118, 32, -22, -52, -112, -74, -100, -92, -58, -82, -216, -50, -144, -114, -82, -174, -208, -112, -132, -74, -136, -102, -164, -116, -270, -244, -218, -234, -130, -216, -228, -302, -320, -440, -246, -564, -162, -514, -340, -626, -346, -846, -364, -986, -440, -1200, -402, -1730, -572, -2570, -784, -4632, -1148, -18262, -4044, 10378, 1936, 4208, 588, 2638, 334, 1958, 174, 1678, 20, 1332, 16, 1134, -58, 1052, -54, 926, 8, 820, 
-148, 670, -200, 626, -56, 620, -118, 576, -202, 498, -198, 518, -92, 516, -90, 472, -204, 468, -154, 326, -138, 396, -234, 382, -180, 234, -156, 246, -202, 292, -182, 198, -186, 
276, -242, 160, -238, 118, -160, 176, -164, 108, -196, 92, -182, 106, -132, 32, -132, 92, -106, 90, -140, -8, -68, -4, -90, 82, -130, 34, -56, -76, 16, -28, -6, 148, -18, -4, 2, 72, 28, 98, 8, 58, 22, 28, -48, 46, -62, 124, 22, 22, -62, 480, 378, 130, 38, 78, 86, 62, 74, 142, 72, -148, 164, 28, 124, 54, 198, 2, 276, -30, 774, 128, -804, 90, -186, 84, -156, 70, -96, 112, 0, 50, -10, 128, -24, 130, -48, 48, -58, 128, -32, 134, -30, 40, -2, 34, -22, 132, -6, 104, -6, 44, 86, 120, 50, 92, 40, 68, 84, 88, 38, 124, 36, 70, 52, 90, -4, 74, 42, 104, 52, 146, -2, 138, 40, 142, 32, 156, 4, 88, 36, 94, -10, 162, 24, 120, 6, 102, -16, 154, 0, 178, 2, 126, -108, 102, -64, 156, 4, 92, -24, 50, -94, 80, -50, 102, 38, 32, 
-10, 54, 0, 72, 36, -62, -20, 126, 2, 70, 22, -2, 72, -12, 120, -1688, 2364, 206, -180, 128, -120, 94, -50, 104, 6, -10, -230, 88, -24, 52, -72, 60, -88, 60, -10, 154, -30, 16, -22, 142, 0, 90, 48, 36, 74, 42, 48, 106, 42, 164, 38, 54, -20, 136, 24, 118, 14, 84, -104, 148, -84, 54, 4, 68, -2, 74, -100, 62, -38, 96, -40, -4, -78, 36, -86, 36, -96, -16, -28, 4, -16, 28, -106, -24, -108, 18, 18, -32, -56, 12, -4, -30, 36, -12, -130, -18, -34, -22, 106, -48, 24, 22, -68, -30, 50, 54, 32, 98, -34, 18, -24, -32, 90, -32, 112, -4, 16, -254, 108, 338, -130, 164, -50, 180, 54, 94, 34, 120, 26, 140, 212, 180, 196, 366, 174, 588, 438, 3402, 2134, -1088, -542, -450, -228, -328, -150, -298, -84, -162, 0, -104, 32, -112, -26, -120, 0, -124, 130, -74, -80, -92, -98, -128, 20, -80, 112, -18, 16, -76, -26, -52, 78, -24, 42, -6, 122, 84, 94, -50, 74, -24, -2, 18, 86, -52, 132, -24, 54, 4, 42, -58, 56, 66, 36, 36, 12, -94, -8, 8, 50, -14, 78, 8, 30, -12, -28, -126, 28, 6, 34, 60, 12, -66, -38, -106, -50, -30, -58, 4, 44, -86, 46, -76, 8, -52, 24, -78, 106, -22, 92, 32, 30, -106, 214, 24, 70, 40, 42, 74, 152, 68, 132, -188, -98, 4, 32, 50, 24, 28, 88, 196, 90, -240, 118, 30, 82, -42, 46, -30, 26, 32, 94, 36, 44, -10, 112, 4, -40, 58, 22, 154, 104, 120, 
46, 140, 42, 206, -6, 110, 12, 208, -6, 166, -24, 40, -58, 94, -172, 96, -62, 116, -72, -22, -68, -2, -72, 142, -130, -6, -80, -68, -110, -104, -106, -56, -46, 22, -68, -140, -108, -276, -98, -54, -54, -146, -34, -148, -58, -94, 64, -282, -68, -224, -44, -106, 54, -286, 68, -288, 38, -230, 104, -196, 56, -250, -70, -354, 12, -238, 120, -138, 118, -244, 44, -312, 328, -296, 170, -312, 104, -224, 72, -338, 168, -346, 224, -276, 260, -336, 348, -514, 294, -766, 622, 8662, -6006, 422, -124, 134, -16, 34, 84, -48, 188, 44, 192, 64, 136, -26, 158, -14, 186, 228, 296, -22, 122, -122, 122, -84, 258, 64, 256, 56, 136, -66, 150, 10, 212, 30, 202, 118, 212, 172, 36, 108, 220, 16, 168, 100, 100, 182, 234, 90, 182, 96, 
152, 90, 258, 138, 58, 104, 40, 2, 224, 88, 148, 130, 140, 104, 106, 44, 82, -18, 276, 80, 152, 128, 56, 40, 138, -34, 188, -76, 130, 38, 86, 28, 176, -26, 212, -6, 160, 40, 252, 
70, 204, 8, 106, 130, 302, 106, 176, 44, 92, 218, 90, 370, 52, -182, 230, -36, 136, -12, 42, 30, 120, 182, -156, 12, 314, 74, 126, 2, 174, -36, 138, -42, -6, 30, 116, 88, 194, -70, 166, -56, 166, 82, 84, -8, 94, 18, 90, 56, -4, -14, 28, 14, -26, 14, -30, -32, 74, -160, -24, -120, -24, -126, -58, -136, 106, -142, 134, -134, -74, -180, 48, -212, 116, -232, 184, -198, 200, -180, 60, -266, 208, -354, 400, -252, 248, -276, 304, -324, 344, -136, 354, -304, 488, -338, 474, -206, 420, -280, 652, -246, 712, -198, 726, -160, 722, -308, 736, 
-328, 940, -192, 986, -140, 926, -272, 1010, -222, 1206, -4, 1390, -52, 1514, -64, 1602, 6, 1964, 104, 2370, 256, 2824, 512, 3814, 842, 5996, 2762, 14802, -5694, -25984, -1590, -6574, -1076, -3648, -784, -2446, -592, -1716, -482, -1392, -446, -1170, -422, -878, -414, -712, -144, -800, -292, -650, -386, -456, -244, -320, -152, -342, -220, -362, -288, -200, 
-216, -170, -152, -174, -124, -162, -246, -292, -86, -178, -142, -98, -216, -172, -68, -174, -102, -96, -106, -128, 24, -38, -120, -156, -188, -142, -76, 10, -68, -50, -74, -74, -112, -54, -146, -62, -20, 104, -40, 26, -118, -64, -62, -4, -12, 76, -84, 122, -134, 42, -54, 84, 34, 210, -34, 118, 54, 172, 78, 148, 0, 160, 168, 136, 144, 134, 32, 214, 78, 102, 18, 228, 156, 58, 100, 84, 40, 70, 118, 120,
]


# Get unfiltered signal
signalNoise = []
try:
    with open(f"{SCRIPT_DIR}/Test5.txt", "r+") as file:
        temp = file.readline()[1:-1]
        tempProcessed = temp.split(",")

        for value in tempProcessed:
            signalNoise += [int(value)]
except:
    print("Run Test5 first")


# Plot signal to see
t = list(range(0, len(signal)))
pyplot.plot(t, signal, "b", label="Filtered Signal")
t = list(range(0, len(signalNoise)))
pyplot.plot(t, signalNoise, "c", label="Noisy Signal")
pyplot.title("Before and after filtering")
pyplot.legend()
pyplot.show()
